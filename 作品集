import React, { useState, useRef, useEffect } from 'react';
import { ChevronRight, ChevronLeft, Play, X, Zap, Box, ArrowLeft, Layers, User, CheckCircle, Star, Mail, Phone, ZoomIn } from 'lucide-react';

/**
 * =========================================================================
 * üõ†Ô∏è DATA & CONFIG
 * =========================================================================
 */
const GITHUB_BASE = "https://raw.githubusercontent.com/plugin1/zuopinji/main/";

const fixUrl = (url) => {
  if (!url) return "";
  // Ëá™Âä®‰øÆÂ§ç GitHub blob ÈìæÊé•‰∏∫ raw ÈìæÊé•
  if (url.includes('github.com') && url.includes('/blob/')) {
    return url.replace('github.com', 'raw.githubusercontent.com').replace('/blob/', '/');
  }
  if (url.startsWith("http")) return url;
  return `${GITHUB_BASE}${encodeURIComponent(url)}`;
};

const CONFIG = {
  info: {
    title: "Âº†ÂßúÁõºÁõº‰ΩúÂìÅÈõÜ 2025",
    description: "ÈïøÊÉÖÂÜíÈô©ÂÆ∂ Ê∑±Â∫¶Á†îÁ©∂Âëò\nÈ£ûÈÄüÂ≠¶‰π†ËÄÖ Ê¥ûËã•ËßÇÁÅ´‰∫∫\nÂÆûÂπ≤Âª∫Á≠ëÂ∏à ÁÅµÊÑüÊ∑òÈáëÂÆ¢\n‰º†Â•áÊäóÂéãÁéã ÈìÅËáÇÊïëÁÅ´Âëò\nÊ∞¥ÂúüÂÖ®ÊúçËÄÖ Â§úÊôö‰∫´Âèó‰∫∫\nÁäÄÂà©ÈîêËØÑËÄÖ Êå•Èì≤ËÄÅÂêÉÂÆ∂\nÂø´‰πêÂ∞èÂìÅÁéã ÁæéÂ•ΩËßÇÂØüÂëò", 
  },
  assets: {
    introVideo: "ÊàëÊòØË∞Å.mp4",
    logo: "ÂÆùÂèØÊ¢¶logo.png",
    photo: "Â§ßÊñ∞ËØÅ‰ª∂ÁÖß202509.png",
    nameTag: "ÂêçÂ≠óÂπ¥ÈæÑËÅîÁ≥ªÊñπÂºè.png",
    card: "https://github.com/plugin1/zuopinji/blob/main/%E5%8D%A7%E6%A7%BD.png", // Êõ¥Êñ∞‰∏∫ÊåáÂÆöÂõæÁâá
    evolutionChain: "ËøõÂåñ.png",
    radarChart: "ÂÖ≠ËæπÂΩ¢.png",
  },
  skills: [
    { name: "ÂàõÈÄ†Âäõ", value: 100, color: "bg-purple-500" },
    { name: "ÊàêÈïøÊÄß", value: 120, color: "bg-red-500" }, 
    { name: "Â≠¶‰π†Âäõ", value: 130, color: "bg-orange-500" }, 
    { name: "Á≤æÂØÜÊÄß", value: 90, color: "bg-blue-500" },
    { name: "ÊåÅÁª≠Âäõ", value: 110, color: "bg-green-500" }, 
    { name: "ÈÄüÂ∫¶", value: 85, color: "bg-yellow-500" },  
  ],
  resume: {
    education: [
      { 
        school: "Êó©Á®ªÁî∞Â§ßÂ≠¶", loc: "‰∏ú‰∫¨ÔºåÊó•Êú¨", 
        dept: "ÊîøÊ≤ªÁªèÊµéÂ≠¶ÈÉ® ÁªèÊµéÂ≠¶ Êú¨Áßë", time: "Â∞Ü‰∫é2027Âπ¥9ÊúàÊØï‰∏ö",
        details: [
          "Â•ñÂ≠¶ÈáëÔºöReserved Scholarship for Successful International ExamineesÔºà2023 ‚Äì 2024Ôºâ„ÄÅSPSE Global Leader Support ScholarshipÔºà2025Áßã ‚Äì 2027Êò•Ôºâ",
          "ËØæÁ®ãÁ†îÁ©∂È°πÁõÆÔºö‰∏≠Êó•ÁªèÊµéÂèëÂ±ïÂéÜÁ®ãÊØîËæÉÂàÜÊûêÔºàËÅöÁÑ¶Á†îÁ©∂Êó•Êú¨Â•≥ÊÄßÁªèÊµéÂèÇ‰∏éËÆÆÈ¢òÔºâ„ÄÅ‚ÄúÁãê‚ÄùÁöÑÂΩ¢Ë±°ÊºîÂèòÂèäÂÖ∂ÂØπÊó•Êú¨ÊñáÂåñÁöÑÂΩ±Âìç„ÄÅÊøíÂç±ÁöÑ‰∏≠ÂõΩÊñπË®ÄÔºà‰ª•ÂåóÊñπÊñπË®ÄÁöÑÁª¥Êä§‰∏∫‰æãÔºâ„ÄÅ‰∏≠ÂõΩÈùíÊò•ÁîµÂΩ±ÁöÑÊºîÂèòËøáÁ®ã‰∏é‚ÄúÊ†°Âõ≠ÈùíÊò•‚ÄùÁîµÂΩ±ÂàÜÊûê"
        ]
      },
      { 
        school: "Âè∞ÊπæÂ§ßÂ≠¶", loc: "‰∏≠ÂõΩÂè∞Âåó", 
        dept: "‰∏éÊó©Á®ªÁî∞Â§ßÂ≠¶ÂèåÂ≠¶‰ΩçÈ°πÁõÆ Á§æ‰ºöÁßëÂ≠¶Èô¢ ÁªèÊµéÂ≠¶ÈÉ® Êú¨Áßë", time: "Â∞Ü‰∫é2027Âπ¥9ÊúàÊØï‰∏ö",
        details: []
      },
      { 
        school: "Ê±âÈò≥Â§ßÂ≠¶", loc: "È¶ñÂ∞îÔºåÈü©ÂõΩ", 
        dept: "Ê±âÈò≥ÂõΩÈôÖÂÜ¨Ê†°", time: "2025Âπ¥2Êúà",
        details: ["ËØæÁ®ãÁ†îÁ©∂È°πÁõÆÔºö„ÄäÈáúÂ±±Ë°å„Äã‰Ωú‰∏∫Âèç‰πåÊâòÈÇ¶ÁîµÂΩ±‰∏éÈü©ÂõΩÂïÜ‰∏öÂ§ßÁâáÁöÑÊúâÊïàÂÖ¨ÂºèÊé¢ËÆ®"]
      }
    ],
    experience: [
      {
        org: "‰∏≠ÂõΩÈì∂Ë°åÂøªÂ∑ûÂ∏ÇÂàÜË°åÂª∫ËÆæË∑ØÊîØË°å", loc: "Â±±Ë•ø",
        role: "Â§ßÂ†ÇÁªèÁêÜÔºàÂÆû‰π†Ôºâ", time: "2025Âπ¥2Êúà - 2025Âπ¥4Êúà"
      },
      {
        org: "‰∏≠ÂõΩÁßªÂä®ÈÄö‰ø°ÈõÜÂõ¢Â±±Ë•øÊúâÈôêÂÖ¨Âè∏ÂøªÂ∑ûÂàÜÂÖ¨Âè∏", loc: "Â±±Ë•ø",
        role: "ÁªºÂêàÊîØÊåÅ‰∏≠ÂøÉ ‰∏öÂä°ÊîØÊåÅÔºàÂÆû‰π†Ôºâ", time: "2024Âπ¥2Êúà - 2025Âπ¥3Êúà",
        details: [
          "Áã¨Á´ãÂçèË∞É2024Âπ¥Â∫¶Âü∫Â±ÇË∞ÉÁ†îÈ°πÁõÆÔºåË¥üË¥£Â§ñÂã§‰∫∫ÂëòË∞ÉÈÖçÂÆâÊéíÔºåÁ°Æ‰øùË¶ÜÁõñÁ≤æÂáÜÂπ∂È´òÊïàÊâßË°å",
          "Âà∂‰Ωú‰ºÅ‰∏öÂêà‰Ωú‰ºô‰º¥ÊãìÂ±ïÂÆ£‰º†ÊùêÊñôÔºå‰∏∫ÊàêÂäüÂª∫Á´ã2È°πËµûÂä©Âêà‰ΩúÊèê‰æõ‰∫ÜÂÖ≥ÈîÆÊîØÊåÅ"
        ]
      }
    ],
    activities: [
      {
        org: "Á¨¨ÂÖ≠Â±ä‚ÄúÊ≥∏Ê≤ΩÊπñÁïîÂ∞ëÂπ¥Ë°å‚ÄùÂÖ¨ÁõäÂ§è‰ª§Ëê•", loc: "‰∫ëÂçó",
        role: "ÂøóÊÑøËÄÖÊïôÂ∏à", time: "2025Âπ¥8Êúà",
        details: [
          "‰∏∫Êù•Ëá™3‰∏™ÊùëËêΩÁöÑ100‰ΩôÂêçÂΩìÂú∞ÂÑøÁ´•ËÆæËÆ°Âπ∂ÂºÄÂ±ï‰∏ÄÂë®ÁöÑ‰∏≠ÂõΩ‰º†ÁªüÂâ™Á∫∏Ëâ∫ÊúØËØæÁ®ãÔºå‰øÉËøõÊñáÂåñÈÅó‰∫ß‰º†Êâø‰∏éÂàõÊÑèË°®Ëææ",
          "ÂºÄÂ±ïÊë©Ê¢≠Á§æÂå∫Ê∞ëÊóèÂøóÁî∞ÈáéË∞ÉÊü•ÔºåÈÄöËøáÂèÇ‰∏éÂºèËßÇÂØü‰∏éÊ∑±Â∫¶ËÆøË∞àÔºåÊ∑±ÂÖ•‰∫ÜËß£ÊØçÁ≥ªÁ§æ‰ºöÁªìÊûÑ„ÄÅ‰π†‰øó„ÄÅ‰ø°‰ª∞‰∏éÂèòËøÅ"
        ]
      },
      {
        org: "Êó©Á®ªÁî∞Â§ßÂ≠¶‰∏≠ÂõΩÂ≠¶Âèã‰ºö", loc: "‰∏ú‰∫¨ÔºåÊó•Êú¨",
        role: "ÂÆ£‰º†ÈÉ®ËßÜËßâÁªÑÊàêÂëò", time: "2023Âπ¥9ÊúàËá≥‰ªä",
        details: [
          "Ë¥üË¥£ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑ÂèäInstagramÁöÑÂÆ£‰º†ÂÜÖÂÆπÁ≠ñÂàí„ÄÅËßÜËßâËÆæËÆ°‰∏éËøêËê•ÔºåÁ≤æÂáÜËß¶ËææÊó©Á®ªÁî∞Â§ßÂ≠¶3000‰ΩôÂêç‰∏≠ÂõΩÁïôÂ≠¶Áîü",
          "Ê∑±Â∫¶ÂèÇ‰∏éÂπ∂ÂçèÂä©ÊâßË°å‚ÄúÊó©Á®ªÁî∞Á•≠‚Äù„ÄÅÊñ∞Âπ¥Êôö‰ºöÂèäÂ§öÊ†°ËÅîÂêàÂ∫ÜÂÖ∏Á≠âÂ§ßÂûãÊ¥ªÂä®ÁöÑÁ∫ø‰∏äÁ∫ø‰∏ãÂÆ£‰º†Â∑•‰Ωú"
        ]
      }
    ],
    skills: "ËØ≠Ë®ÄÊäÄËÉΩÔºö‰∏≠ÊñáÔºàHSK9Á∫ß„ÄÅÊôÆÈÄöËØù‰∏Ä‰πôÔºâ„ÄÅËã±ËØ≠ÔºàÊµÅÂà©Ôºâ„ÄÅÊó•ËØ≠ÔºàÂü∫Á°ÄÔºâ\nÊäÄÊúØÊäÄËÉΩÔºöÂäûÂÖ¨ËΩØ‰ª∂ÔºàWord, Excel, PowerPointÔºâ„ÄÅËÆæËÆ°/ÁªòÂõæÔºàProcreate, Photoshop, CanvaÔºâ„ÄÅÁºñÁ®ã‰∏éÊï∞ÊçÆÂàÜÊûêÔºàR, Python, GitHubÔºâ„ÄÅAIÂ∑•ÂÖ∑ÔºàChatGPT, Gemini, DeepSeek, Qwen, Grok, NotionÔºâ\nÂÖ∂‰ªñÔºöËßÜÈ¢ëÂâ™ËæëÔºàCapcut ProÔºâ„ÄÅÊëÑÂΩ±ÔºàËÉ∂Áâá„ÄÅÊï∞Á†ÅÔºâ„ÄÅËÆæËÆ°Ôºà‰º†ÁªüÂâ™Á∫∏„ÄÅÁæéÁî≤ËÆæËÆ°„ÄÅÂ≠ó‰ΩìËÆæËÆ°„ÄÅ‰∫ßÂìÅËÆæËÆ°Ôºâ"
  },
  gallery: [
    {
      id: "digital_planner",
      title: "ÁîµÂ≠êÊó•Á®ãÊú¨ËÆæËÆ°",
      type: "grid",
      desc: "",
      thumbnail: "2.png", 
      items: ["1.png", "2.png", "3.png", "4.png", "5.png"]
    },
    {
      id: "style_mimic",
      title: "È£éÊ†ºÊ®°‰ªø",
      type: "compare_row", 
      desc: "",
      thumbnail: "Âõõ8_‰ªøÁîªÈ£é1_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.PNG", 
      pairs: [
          { ref: "Âõõ81ÂèÇËÄÉ.png", res: "Âõõ8_‰ªøÁîªÈ£é1_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.PNG" },
          { ref: "Âõõ82ÂèÇËÄÉ.png", res: "Âõõ8_‰ªøÁîªÈ£é2_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.PNG" }
      ]
    },
    {
      id: "painting",
      title: "ÁªòÁîª",
      type: "grid_4col", 
      desc: "",
      thumbnail: "Âõõ10_ÊâãÁªò4_ÁîüÊ¥ªÁÖß2_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.jpg", 
      items: [
         "Âõõ10_ÊâãÁªò1_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.jpg",
         "Âõõ10_ÊâãÁªò4_ÁîüÊ¥ªÁÖß1_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.jpg",
         "Âõõ10_ÊâãÁªò4_ÁîüÊ¥ªÁÖß2_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.jpg",
         "Âõõ10_ÊâãÁªò4_ÁîüÊ¥ªÁÖß3_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.png"
      ]
    },
    {
      id: "character_design",
      title: "‰∫∫Áâ©ËÆæËÆ°",
      type: "split", 
      desc: "ËßíËâ≤ËÆæÂÆö„ÄÅQÁâà„ÄÅÂ§¥ÂÉèÂèäNFCËäØÁâá‰∫ßÂìÅÂÆûÁâ©", 
      thumbnail: "Âõõ3_‰ªøÁîªÈ£éÂ§¥ÂÉè1_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.PNG", 
      main: "Âõõ4_‰∫∫Áâ©ËÆæËÆ°_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.JPG",
      subItems: [
         { type: "img", src: "Âõõ3_‰ªøÁîªÈ£éÂ§¥ÂÉè1_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.PNG" },
         { type: "img", src: "Âõõ3_‰ªøÁîªÈ£éÂ§¥ÂÉè2_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.jpg" },
         { type: "video", src: "Âõõ3_‰ªøÁîªÈ£éÂ§¥ÂÉè_NFCÊ†áÁ≠æ_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.mov" }
      ]
    },
    {
      id: "hand_crochet",
      title: "ÊâãÂ∑• (Èí©Èíà)",
      type: "single",
      desc: "",
      thumbnail: "Âõõ7_Èí©Èíà_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.jpg",
      src: "Âõõ7_Èí©Èíà_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.jpg"
    },
    {
      id: "splatoon",
      title: "ÊñØÊôÆÊãâÈÅÅ3È£éÊ†ºËÆæËÆ°",
      type: "compare_columns",
      desc: "",
      thumbnail: "Âõõ6_‰∫∫Áâ©ËÆæËÆ°_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.png", 
      cols: [
          { 
              title: "ËßíËâ≤", 
              items: [
                  { src: "Âõõ6ÂèÇËÄÉ.png", label: "ÂèÇËÄÉ", flex: 0.6 }, 
                  { src: "Âõõ6_‰∫∫Áâ©ËÆæËÆ°_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.png", label: "ËÆæËÆ°", flex: 1.4 } 
              ], 
              flex: 1.0 
          }, 
          { title: "Â∑•Áâå", items: ["Âõõ9_Â∑•ÁâåËÆæËÆ°_Ê≠£_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.PNG", "Âõõ9_Â∑•ÁâåËÆæËÆ°_Âèç_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.PNG"], flex: 1.0 },
          { title: "Â≠¶ÁîüËØÅ", items: ["Âõõ9_Â≠¶ÁîüËØÅËÆæËÆ°_Ê≠£_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.jpg", "Âõõ9_Â≠¶ÁîüËØÅËÆæËÆ°_Âèç_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.PNG"], flex: 1.0 }
      ]
    },
    {
      id: "field_research",
      title: "Áî∞ÈáéÁ†îÁ©∂",
      type: "grid_large",
      desc: "ÂºÄÂ±ïÊë©Ê¢≠Á§æÂå∫Ê∞ëÊóèÂøóÁî∞ÈáéË∞ÉÊü•ÔºåÈÄöËøáÂèÇ‰∏éÂºèËßÇÂØü‰∏éÊ∑±Â∫¶ËÆøË∞àÔºåÊ∑±ÂÖ•‰∫ÜËß£ÊØçÁ≥ªÁ§æ‰ºöÁªìÊûÑ„ÄÅ‰π†‰øó„ÄÅ‰ø°‰ª∞‰∏éÂèòËøÅ„ÄÇ",
      thumbnail: "‰∏ÄÊó•Êë©Ê¢≠1.jpg", 
      items: ["‰∏ÄÊó•Êë©Ê¢≠1.jpg", "‰∏ÄÊó•Êë©Ê¢≠2.jpg"]
    },
    {
      id: "paper_cut",
      title: "‰º†ÁªüÂâ™Á∫∏",
      type: "masonry", 
      desc: "Á¨¨ÂÖ≠Â±ä‚ÄúÊ≥∏Ê≤ΩÊπñÁïîÂ∞ëÂπ¥Ë°å‚ÄùÂÖ¨ÁõäÂ§è‰ª§Ëê• ‰∫ëÂçóÂøóÊÑøËÄÖÊïôÂ∏à 2025Âπ¥8Êúà\n‰∏∫Êù•Ëá™3‰∏™ÊùëËêΩÁöÑ100‰ΩôÂêçÂΩìÂú∞ÂÑøÁ´•ËÆæËÆ°Âπ∂ÂºÄÂ±ï‰∏ÄÂë®ÁöÑ‰∏≠ÂõΩ‰º†ÁªüÂâ™Á∫∏Ëâ∫ÊúØËØæÁ®ãÔºå‰øÉËøõÊñáÂåñÈÅó‰∫ß‰º†Êâø‰∏éÂàõÊÑèË°®Ëææ",
      thumbnail: "4c67a4c3bde6dec2b5bb2df6a2ad844e.jpg", 
      items: [
          "4c67a4c3bde6dec2b5bb2df6a2ad844e.jpg",
          "be441c5782ed10fd7722aca01abcb328.jpg",
          "IMG_3620.jpg",
          "IMG_3627.JPG",
          "IMG_4118.jpg",
          "IMG_4147.jpg",
          "IMG_4149.jpg",
          "IMG_4148.jpg"
      ]
    },
    // --- ËøõÂåñ‰ΩúÂìÅ ---
    {
      id: "nail_art",
      title: "ÁæéÁî≤ËÆæËÆ°",
      type: "evolution",
      desc: "",
      thumbnail: "Âõõ5_ÁæéÁî≤ËÆæËÆ°_ÂÆûÁâ©Âõæ_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.png",
      stages: [
        { name: "ËÆæËÆ°Á®ø", src: "Âõõ5_ÁæéÁî≤ËÆæËÆ°_ËÆæËÆ°Á®ø_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.png" },
        { name: "ËÆæËÆ°Âõæ", src: "Âõõ5_ÁæéÁî≤ËÆæËÆ°_ËÆæËÆ°Âõæ_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.png" },
        { name: "ÂÆûÁâ©Âõæ", src: "Âõõ5_ÁæéÁî≤ËÆæËÆ°_ÂÆûÁâ©Âõæ_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.png" }
      ]
    },
    {
      id: "patches_design",
      title: "‰∫ßÂìÅËÆæËÆ°", 
      type: "evolution",
      desc: "ÁîµËÑëÁôæË¥¥Â∏É", 
      thumbnail: "Âõõ11_ÁîµËÑëÁôæË¥¥Â∏ÉËÆæËÆ°_ËÆæËÆ°Âõæ_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.PNG",
      stages: [
          { name: "ËÆæËÆ°Âõæ", src: "Âõõ11_ÁîµËÑëÁôæË¥¥Â∏ÉËÆæËÆ°_ËÆæËÆ°Âõæ_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.PNG" },
          { name: "ÂÆûÁâ©", src: ["Âõõ11_ÁîµËÑëÁôæË¥¥Â∏ÉËÆæËÆ°_ÂÆûÁâ©Âõæ1_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.jpg", "Âõõ11_ÁîµËÑëÁôæË¥¥Â∏ÉËÆæËÆ°_ÂÆûÁâ©Âõæ2_Âº†ÂßúÁõºÁõº_12Êúà31Êó•Âà∞.jpg"] }
      ]
    },
  ]
};

/**
 * =========================================================================
 * üß© COMPONENTS
 * =========================================================================
 */

const Lightbox = ({ src, onClose }) => {
    if (!src) return null;
    const isArray = Array.isArray(src);
    return (
        <div className="fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4 animate-in fade-in duration-300 backdrop-blur-sm" onClick={onClose}>
            <button className="absolute top-6 right-6 text-white/70 hover:text-white transition-colors bg-white/10 rounded-full p-2">
                <X size={32} />
            </button>
            <div className="w-full h-full flex items-center justify-center" onClick={e => e.stopPropagation()}>
                {isArray ? (
                     <div className="flex gap-4 w-full h-full items-center justify-center overflow-x-auto p-4">
                         {src.map((s, i) => (
                             <img key={i} src={fixUrl(s)} className="max-h-full max-w-[80vw] object-contain shadow-2xl rounded-lg" />
                         ))}
                     </div>
                ) : (
                    src.toLowerCase().endsWith('.mov') || src.toLowerCase().endsWith('.mp4') ? (
                        <video src={fixUrl(src)} controls autoPlay className="max-w-full max-h-full rounded-lg shadow-2xl" />
                    ) : (
                        <img src={fixUrl(src)} className="max-w-full max-h-full object-contain shadow-2xl rounded-lg" />
                    )
                )}
            </div>
        </div>
    )
}

const MediaItem = ({ src, className, isVideo, onZoom }) => {
    const vRef = useRef(null);
    const [playing, setPlaying] = useState(false);
    
    if (Array.isArray(src)) {
        return (
            <div className={`flex w-full h-full gap-2 ${className}`}>
                {src.map((s, i) => (
                     <div key={i} className="flex-1 h-full relative cursor-zoom-in group min-w-0 bg-gray-50 rounded-lg overflow-hidden border border-gray-100" onClick={(e) => { e.stopPropagation(); onZoom(src); }}>
                         <img src={fixUrl(s)} className="w-full h-full object-contain" />
                         <div className="absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none">
                             <ZoomIn className="text-white drop-shadow-md" size={24}/>
                         </div>
                     </div>
                ))}
            </div>
        )
    }

    let finalSrc = fixUrl(src);
    const isMov = finalSrc.toLowerCase().includes('.mov') || finalSrc.toLowerCase().includes('.mp4') || isVideo;

    if (isMov) {
        return (
            <div className={`relative bg-black group cursor-pointer flex items-center justify-center overflow-hidden rounded-lg ${className}`} onClick={(e) => {
                e.stopPropagation();
                if(vRef.current) {
                    playing ? vRef.current.pause() : vRef.current.play();
                    setPlaying(!playing);
                }
            }}>
                <video 
                    ref={vRef}
                    src={finalSrc} 
                    className="max-w-full max-h-full object-contain" 
                    playsInline 
                    loop
                />
                {!playing && (
                    <div className="absolute inset-0 flex items-center justify-center bg-black/40 z-10 transition-opacity hover:bg-black/30">
                        <Play className="text-white fill-white drop-shadow-lg scale-100 group-hover:scale-110 transition-transform" size={48}/>
                    </div>
                )}
            </div>
        )
    }
    return (
        <div className={`relative group w-full h-full flex items-center justify-center rounded-lg overflow-hidden bg-white ${className}`} onClick={(e) => { e.stopPropagation(); onZoom(src); }}>
            <img src={finalSrc} className="max-w-full max-h-full object-contain cursor-zoom-in transition-transform duration-500 group-hover:scale-[1.02]" loading="lazy" />
            <div className="absolute inset-0 pointer-events-none flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10">
                 <div className="bg-black/40 p-2 rounded-full backdrop-blur-sm shadow-lg transform scale-0 group-hover:scale-100 transition-transform duration-300">
                     <ZoomIn className="text-white" size={20}/>
                 </div>
            </div>
        </div>
    );
};

const EvolutionViewer = ({ stages, onZoom, isIdle }) => {
    const [level, setLevel] = useState(0);
    const [isEvolving, setIsEvolving] = useState(false);

    const handleEvolve = () => {
        if (level >= stages.length - 1) {
            setLevel(0); 
            return;
        }
        setIsEvolving(true);
        setTimeout(() => {
            setLevel(p => p + 1);
            setIsEvolving(false);
        }, 800);
    };

    const currentStage = stages[level];
    const canEvolve = level < stages.length - 1;

    return (
        <div className="flex flex-col h-full rounded-xl overflow-hidden">
             <div className="flex-1 relative bg-gray-50 overflow-hidden flex items-center justify-center border border-gray-100 rounded-xl mb-3">
                 {isEvolving && (
                     <div className="absolute inset-0 z-50 bg-white animate-[ping_0.8s_ease-in-out] flex items-center justify-center">
                         <Star size={120} className="text-yellow-400 animate-spin fill-yellow-400"/>
                     </div>
                 )}
                 <MediaItem src={currentStage.src} onZoom={onZoom} className="max-w-full max-h-full p-2" />
                 <div className="absolute top-4 left-4 bg-black/70 text-white px-3 py-1 rounded text-sm font-bold tracking-widest z-10 shadow-lg border border-white/20">
                     {currentStage.name}
                 </div>
             </div>
             <div className="h-14 flex items-center justify-between px-6 bg-gray-50 border border-gray-100 rounded-xl shrink-0">
                 <div className="flex gap-2.5">
                     {stages.map((_, idx) => (
                         <div key={idx} className={`w-3 h-3 rounded-full transition-all duration-500 ${idx === level ? 'bg-blue-500 scale-125 shadow-md ring-2 ring-blue-100' : 'bg-gray-200'}`}></div>
                     ))}
                 </div>
                 <button 
                    onClick={handleEvolve}
                    className={`
                        px-6 py-2 rounded-full font-bold text-sm tracking-wider transition-all shadow-md flex items-center gap-2
                        ${canEvolve 
                            ? `bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:shadow-lg hover:scale-105 active:scale-95 ${isIdle ? 'animate-pulse ring-4 ring-yellow-400 bg-yellow-500' : ''}` 
                            : 'bg-gray-200 text-gray-500 hover:bg-gray-300'
                        }
                    `}
                 >
                    {canEvolve ? <><Zap size={16} className="fill-white"/> ËøõÂåñ</> : "ÈáçÁΩÆ"}
                 </button>
             </div>
        </div>
    )
}

export default function App() {
  const [slide, setSlide] = useState(0);
  const [selectedWork, setSelectedWork] = useState(null); 
  const [capturedIds, setCapturedIds] = useState([]);
  const [videoPlaying, setVideoPlaying] = useState(false);
  const [zoomSrc, setZoomSrc] = useState(null);
  const [isIdle, setIsIdle] = useState(false);
  const videoRef = useRef(null);
  const idleTimerRef = useRef(null);
  
  // Slide 0: Video, 1: Profile, 2: Radar, 3: Edu, 4: Internship, 5: Activities, 6: Skills, 7: Works, 8: Contact
  const totalSlides = 8; 

  const nextSlide = () => { if (!selectedWork) setSlide(p => Math.min(p + 1, totalSlides)); };
  const prevSlide = () => { selectedWork ? setSelectedWork(null) : setSlide(p => Math.max(p - 1, 0)); };

  const handleCapture = (work) => {
      setSelectedWork(work);
      if (!capturedIds.includes(work.id)) setCapturedIds([...capturedIds, work.id]);
  };

  const handlePlayVideo = () => {
    if (videoRef.current) {
      videoRef.current.play().catch(e => console.log("Autoplay prevented"));
      setVideoPlaying(true);
    }
  };

  // Èó≤ÁΩÆÊ£ÄÊµã
  const resetIdleTimer = () => {
      setIsIdle(false);
      if (idleTimerRef.current) clearTimeout(idleTimerRef.current);
      idleTimerRef.current = setTimeout(() => setIsIdle(true), 5000); // 5ÁßíÊó†Êìç‰Ωú
  };

  useEffect(() => {
    const events = ['mousemove', 'keydown', 'click', 'scroll'];
    const handler = () => resetIdleTimer();
    events.forEach(e => window.addEventListener(e, handler));
    resetIdleTimer();
    return () => {
        events.forEach(e => window.removeEventListener(e, handler));
        if (idleTimerRef.current) clearTimeout(idleTimerRef.current);
    }
  }, []);

  useEffect(() => {
    const handleKey = (e) => {
      resetIdleTimer();
      if (zoomSrc) {
          if (e.key === 'Escape') setZoomSrc(null);
          return;
      }
      if (e.key === 'ArrowRight') nextSlide();
      if (e.key === 'ArrowLeft') prevSlide();
      if (e.key === 'Escape') setSelectedWork(null);
    };
    window.addEventListener('keydown', handleKey);
    return () => window.removeEventListener('keydown', handleKey);
  }, [selectedWork, slide, zoomSrc]);

  // Ê∏≤Êüì‰ΩúÂìÅËØ¶ÊÉÖÂÜÖÂÆπÂå∫
  const renderDetailContent = (work) => {
      switch(work.type) {
          case 'split':
              return (
                  <div className="flex flex-col md:flex-row h-full gap-4 overflow-hidden">
                      <div className="flex-[2] bg-gray-50 border border-gray-100 rounded-xl overflow-hidden flex items-center justify-center p-2 shadow-inner">
                          <MediaItem src={work.main} onZoom={setZoomSrc} />
                      </div>
                      <div className="flex-1 flex flex-col gap-4 overflow-y-auto min-w-[200px] pr-1">
                          {work.subItems.map((sub, i) => (
                              <div key={i} className="flex-1 bg-gray-50 border border-gray-100 rounded-xl overflow-hidden min-h-[140px] flex items-center justify-center relative shadow-sm hover:shadow transition-shadow">
                                  <MediaItem src={sub.src} isVideo={sub.type==='video'} onZoom={setZoomSrc} />
                              </div>
                          ))}
                      </div>
                  </div>
              )
          case 'compare_columns':
              return (
                  <div className="h-full flex gap-4 overflow-hidden">
                      {work.cols.map((col, i) => (
                          <div key={i} className="flex flex-col gap-3 h-full" style={{flex: col.flex}}>
                              <h4 className="text-center text-xs font-bold text-gray-500 bg-gray-100 py-1.5 rounded-lg border border-gray-200 shrink-0 uppercase tracking-wide">{col.title}</h4>
                              <div className="flex-1 flex flex-col gap-3 min-h-0">
                                {col.items.map((item, j) => {
                                    const isConfigObj = typeof item === 'object' && item.src;
                                    const src = isConfigObj ? item.src : item;
                                    const flexVal = isConfigObj ? item.flex : 1;
                                    const label = isConfigObj ? item.label : null;

                                    return (
                                        <div key={j} className="flex flex-col relative min-h-0 shadow-sm hover:shadow transition-shadow" style={{flex: flexVal}}>
                                            <div className="flex-1 bg-white border border-gray-100 rounded-xl overflow-hidden relative">
                                                {label && (
                                                    <span className={`absolute top-2 left-2 px-2 py-0.5 rounded text-[10px] font-bold z-10 border ${label==='ÂèÇËÄÉ' ? 'bg-gray-200/80 text-gray-600 border-gray-300' : 'bg-blue-50/80 text-blue-600 border-blue-100'}`}>
                                                        {label}
                                                    </span>
                                                )}
                                                <MediaItem src={src} onZoom={setZoomSrc} />
                                            </div>
                                        </div>
                                    )
                                })}
                              </div>
                          </div>
                      ))}
                  </div>
              )
          case 'compare_row':
               return (
                  <div className="h-full flex flex-col gap-6 overflow-y-auto pr-2">
                      {work.pairs.map((pair, i) => (
                          <div key={i} className="flex flex-col md:flex-row gap-4 h-[45%] min-h-[280px] w-full items-stretch shrink-0">
                              <div className="flex-[0.8] bg-gray-50 rounded-xl border border-gray-200 p-2 flex flex-col relative shadow-inner">
                                  <span className="absolute top-2 left-2 bg-gray-200/80 backdrop-blur-sm text-gray-600 px-2 py-0.5 rounded text-[10px] font-bold z-10 border border-gray-300">ÂèÇËÄÉ</span>
                                  <MediaItem src={pair.ref} onZoom={setZoomSrc} />
                              </div>
                              <div className="flex flex-col justify-center items-center text-gray-300">
                                  <ArrowLeft className="rotate-180 md:rotate-0" size={24} />
                              </div>
                              <div className="flex-[1.2] bg-white rounded-xl border border-gray-100 shadow-sm p-2 flex flex-col relative hover:shadow-md transition-shadow">
                                  <span className="absolute top-2 left-2 bg-blue-50/80 backdrop-blur-sm text-blue-600 px-2 py-0.5 rounded text-[10px] font-bold z-10 border border-blue-100">ÁªìÊûú</span>
                                  <MediaItem src={pair.res} onZoom={setZoomSrc} />
                              </div>
                          </div>
                      ))}
                  </div>
               )
          case 'grid':
          case 'grid_2col':
          case 'grid_4col':
          case 'grid_large':
              let cols = 'grid-cols-2 md:grid-cols-3';
              if (work.type === 'grid_2col') cols = 'grid-cols-2';
              if (work.type === 'grid_large') cols = 'grid-cols-2';
              if (work.type === 'grid_4col') cols = 'grid-cols-2 md:grid-cols-4';
              
              return (
                  <div className="h-full overflow-y-auto p-2 md:p-4 custom-scrollbar">
                       <div className={`grid ${cols} gap-4 auto-rows-fr`}>
                           {work.items.map((item, i) => (
                               <div key={i} className="aspect-square bg-white border border-gray-100 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow">
                                   <MediaItem src={item} onZoom={setZoomSrc} />
                               </div>
                           ))}
                       </div>
                  </div>
              )
          case 'masonry':
              const colCount = 3;
              return (
                  <div className="h-full w-full overflow-hidden p-2 flex gap-3">
                       {Array.from({ length: colCount }).map((_, colIdx) => (
                           <div key={colIdx} className="flex-1 flex flex-col gap-3 h-full">
                               {work.items.filter((_, i) => i % colCount === colIdx).map((item, j) => (
                                   <div key={j} className="flex-1 bg-white border border-gray-100 rounded-xl overflow-hidden shadow-sm min-h-0 relative hover:shadow-md transition-shadow">
                                       <MediaItem src={item} onZoom={setZoomSrc} className="p-1" />
                                   </div>
                               ))}
                           </div>
                       ))}
                  </div>
              )
          case 'single':
              return (
                  <div className="h-full flex items-center justify-center p-4 bg-gray-50 rounded-xl border border-gray-100 shadow-inner">
                      <MediaItem src={work.src} onZoom={setZoomSrc} />
                  </div>
              )
          case 'evolution':
              return <EvolutionViewer stages={work.stages} onZoom={setZoomSrc} isIdle={isIdle} />
          default: return null;
      }
  }

  // Ê£ÄÊü•ÊòØÂê¶ÊâÄÊúâ‰ΩúÂìÅÈÉΩÂ∑≤Êü•Áúã
  const allCaptured = capturedIds.length === CONFIG.gallery.length;

  return (
    <div className="flex flex-col items-center justify-center min-h-screen bg-[#1a1a1d] font-sans text-slate-800 p-2 md:p-8 selection:bg-yellow-400">
      
      {/* ÊéåÊú∫/Âπ≥ÊùøÂ§ñÂ£≥ */}
      <div className="w-full max-w-7xl aspect-[16/10] md:h-[85vh] bg-slate-100 rounded-[2rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] overflow-hidden relative border border-gray-500/50 flex flex-col ring-8 ring-[#2c2c30]">
        
        {/* È°∂ÈÉ®Ê†è */}
        <div className="h-12 bg-gray-900 text-white flex justify-between items-center px-6 z-20 shrink-0 border-b border-gray-800 bg-gradient-to-r from-gray-900 to-gray-800">
          <div className="flex items-center space-x-3">
            <div className={`w-2.5 h-2.5 rounded-full ${slide===totalSlides ? 'bg-green-500 shadow-[0_0_8px_lime]' : 'bg-red-500 animate-pulse'}`}></div>
            <span className="font-bold tracking-widest text-sm text-gray-300">
              {CONFIG.info.title}
            </span>
          </div>
          <div className="flex items-center gap-3">
             <div className="w-32 h-1.5 bg-gray-700 rounded-full overflow-hidden border border-gray-600/50">
                 <div className="h-full bg-yellow-400 shadow-[0_0_10px_orange] transition-all duration-500" style={{width: `${(slide / totalSlides) * 100}%`}}></div>
             </div>
             <span className="text-xs font-mono font-bold text-yellow-400 tracking-wider">
                Lv. {slide}
             </span>
          </div>
        </div>

        {/* Â±èÂπïÂÜÖÂÆπ */}
        <div className="flex-1 relative bg-white overflow-hidden flex flex-col">
          
          {/* ---> Slide 0: Video <--- */}
          {slide === 0 && (
            <div className="w-full h-full bg-black flex items-center justify-center relative">
              <video 
                ref={videoRef}
                className="w-full h-full object-contain"
                src={fixUrl(CONFIG.assets.introVideo)}
                onEnded={() => { setVideoPlaying(false); nextSlide(); }}
                playsInline
              />
              {!videoPlaying && (
                 <div className="absolute inset-0 bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center z-10">
                    <img src={fixUrl(CONFIG.assets.logo)} className="w-64 mb-8 animate-bounce-slow drop-shadow-[0_0_15px_white]" />
                    <button onClick={handlePlayVideo} className="bg-yellow-400 hover:bg-yellow-300 text-black px-10 py-3 rounded font-black text-xl tracking-tighter hover:scale-105 transition-transform flex items-center border-4 border-black shadow-[4px_4px_0px_rgba(0,0,0,1)]">
                        <Play size={24} className="fill-black mr-2"/> START
                    </button>
                 </div>
              )}
            </div>
          )}

          {/* ---> Slide 1: Profile (ÈáçÊûÑÁâà) <--- */}
          {slide === 1 && (
            <div className="w-full h-full flex flex-col bg-slate-50">
              <div className="flex-1 flex flex-col md:flex-row p-8 gap-8 items-stretch overflow-hidden">
                  
                  {/* Left: Card (Á∫ØÂõæÁâáÂ±ïÁ§∫) */}
                  <div className="flex-1 flex items-center justify-center">
                      <div className="relative h-full w-full max-w-[320px] hover:-translate-y-2 transition-transform duration-500">
                          <img src={fixUrl(CONFIG.assets.card)} className="h-full w-full object-contain drop-shadow-2xl" />
                      </div>
                  </div>

                  {/* Middle: Trainer Info */}
                  <div className="flex-[0.8] bg-white rounded-2xl border border-gray-100 shadow-sm flex flex-col overflow-hidden">
                       <div className="bg-gray-50/50 p-3 border-b border-gray-100 flex items-center gap-2">
                           <User size={14} className="text-gray-400"/>
                           <span className="text-xs font-bold text-gray-500 tracking-wider">ËÆ≠ÁªÉÂÆ∂</span>
                       </div>
                       <div className="flex-1 p-6 flex items-center justify-center">
                           <div className="text-sm leading-9 text-gray-700 font-medium whitespace-pre-wrap text-center font-mono tracking-widest">
                               {CONFIG.info.description}
                           </div>
                       </div>
                  </div>

                  {/* Right: Personal Info (‰øÆÊ≠£ÂÆö‰Ωç) */}
                  <div className="flex-1 flex flex-col items-center justify-center relative bg-white rounded-2xl border border-gray-100 shadow-sm p-4 overflow-hidden group">
                      <div className="relative w-full h-full flex items-center justify-center">
                          <div className="relative w-full">
                              <img src={fixUrl(CONFIG.assets.nameTag)} className="w-full h-auto object-contain relative z-10" />
                              {/* ‰øÆÊ≠£ÔºöËØÅ‰ª∂ÁÖßÁªùÂØπÂÆö‰ΩçÂà∞ NameTag ÂõæÁâáÁöÑÂè≥‰∏äËßí */}
                              <div className="absolute top-0 right-0 w-[23%] aspect-[3/4] z-20 bg-white border-[3px] border-white shadow-md">
                                  <img src={fixUrl(CONFIG.assets.photo)} className="w-full h-full object-cover" />
                              </div>
                          </div>
                      </div>
                  </div>
              </div>

              {/* Bottom: Evolution Chain */}
              <div className="h-[20%] min-h-[120px] bg-white border-t border-gray-100 flex items-center justify-center shadow-[inset_0_4px_10px_rgba(0,0,0,0.02)] relative overflow-hidden">
                  <img src={fixUrl(CONFIG.assets.evolutionChain)} className="w-[95%] h-[90%] object-contain" />
              </div>
            </div>
          )}

          {/* ---> Slide 2: Radar <--- */}
          {slide === 2 && (
            <div className="w-full h-full flex flex-col md:flex-row items-center justify-center p-12 md:p-24 bg-slate-50 gap-16">
               <div className="flex-1 w-full h-full max-w-5xl mx-auto flex items-center justify-center bg-white rounded-3xl shadow-sm border border-gray-100 p-12">
                   <div className="flex-1 flex flex-col md:flex-row items-center justify-center gap-16 w-full">
                       <div className="flex-1 flex items-center justify-center">
                           <div className="relative w-full max-w-sm aspect-square">
                               <img src={fixUrl(CONFIG.assets.radarChart)} className="w-full h-full object-contain drop-shadow-xl mix-blend-multiply" />
                           </div>
                       </div>
                       <div className="flex-1 w-full max-w-lg space-y-5">
                          <div className="flex items-center mb-8 border-b-4 border-gray-900 pb-2">
                              <h2 className="text-3xl font-black text-slate-900 tracking-wider">ËÉΩÂäõÈõ∑ËææÂõæ</h2>
                          </div>
                          {CONFIG.skills.map((skill, idx) => {
                              const isOverflow = skill.value > 100;
                              return (
                                <div key={idx} className="relative">
                                    <div className="flex justify-between text-xs font-bold mb-1.5 tracking-wide px-1">
                                        <span className="text-slate-500 uppercase">{skill.name}</span>
                                        <span className={`font-mono ${isOverflow ? 'text-red-500 font-bold' : 'text-slate-800'}`}>{skill.value}</span>
                                    </div>
                                    <div className="h-4 bg-gray-100 rounded-full relative mr-12 border border-gray-200 overflow-visible"> 
                                        <div 
                                            className={`absolute top-0 left-0 h-full rounded-full flex items-center justify-end
                                                ${skill.color} 
                                                ${isOverflow ? 'shadow-[0_0_15px_rgba(255,0,0,0.5)] z-10' : ''}
                                            `}
                                            style={{ width: `${skill.value}%`, maxWidth: 'none' }} 
                                        >
                                            {isOverflow && (
                                                <div className="absolute -right-4 top-1/2 -translate-y-1/2">
                                                    <Zap className="fill-yellow-400 text-yellow-500 animate-bounce drop-shadow-sm" size={20} />
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                              )
                          })}
                       </div>
                   </div>
               </div>
            </div>
          )}

          {/* ---> Slide 3: Education <--- */}
          {slide === 3 && (
            <div className="w-full h-full bg-white p-12 md:p-20 overflow-hidden flex flex-col justify-center">
                <h2 className="text-3xl font-black text-slate-800 mb-10 border-b-4 border-blue-500 inline-block self-start pb-2">ÊïôËÇ≤ËÉåÊôØ</h2>
                <div className="space-y-12">
                    {CONFIG.resume.education.map((edu, i) => (
                        <div key={i} className="border-l-4 border-gray-200 pl-8 hover:border-blue-400 transition-colors group">
                            <div className="flex flex-col md:flex-row md:justify-between md:items-baseline mb-3">
                                <h3 className="text-2xl font-bold text-gray-900 group-hover:text-blue-700 transition-colors">{edu.school}</h3>
                                <span className="text-base font-bold text-gray-400">{edu.loc}</span>
                            </div>
                            <div className="flex flex-col md:flex-row md:justify-between md:items-baseline mb-4">
                                <span className="text-lg text-gray-700 font-medium">{edu.dept}</span>
                                <span className="text-sm text-gray-400 font-mono">{edu.time}</span>
                            </div>
                            {edu.details.length > 0 && (
                                <ul className="list-disc list-inside text-sm text-gray-600 space-y-2 leading-relaxed opacity-80 group-hover:opacity-100 transition-opacity">
                                    {edu.details.map((d, j) => <li key={j}>{d}</li>)}
                                </ul>
                            )}
                        </div>
                    ))}
                </div>
            </div>
          )}

           {/* ---> Slide 4: Internship <--- */}
           {slide === 4 && (
            <div className="w-full h-full bg-white p-12 md:p-20 overflow-hidden flex flex-col justify-center">
                <div className="mb-12">
                    <h2 className="text-3xl font-black text-slate-800 mb-2 border-b-4 border-green-500 inline-block pb-2">ÂÆû‰π†ÁªèÂéÜ</h2>
                </div>
                <div className="flex flex-col gap-10">
                    {CONFIG.resume.experience.map((exp, i) => (
                        <div key={i} className="bg-gray-50/50 p-8 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all hover:-translate-y-1">
                            <div className="flex justify-between items-baseline mb-4">
                                <h3 className="text-xl font-bold text-gray-900">{exp.org}</h3>
                                <span className="text-sm font-bold text-gray-400">{exp.loc}</span>
                            </div>
                            <div className="flex justify-between items-baseline mb-4 pb-4 border-b border-gray-200/50">
                                <span className="text-lg font-bold text-gray-700">{exp.role}</span>
                                <span className="text-sm text-gray-400 font-mono">{exp.time}</span>
                            </div>
                            {exp.details && (
                                <ul className="list-disc list-inside text-sm text-gray-600 space-y-2 leading-relaxed">
                                    {exp.details.map((d, j) => <li key={j}>{d}</li>)}
                                </ul>
                            )}
                        </div>
                    ))}
                </div>
            </div>
          )}

           {/* ---> Slide 5: Activities <--- */}
           {slide === 5 && (
            <div className="w-full h-full bg-white p-12 md:p-20 overflow-hidden flex flex-col justify-center">
                <div className="mb-12">
                    <h2 className="text-3xl font-black text-slate-800 mb-6 border-b-4 border-yellow-500 inline-block pb-2">Ê¥ªÂä®ÁªèÂéÜ</h2>
                </div>
                <div className="space-y-8">
                    {CONFIG.resume.activities.map((act, i) => (
                        <div key={i} className="bg-yellow-50/30 p-8 rounded-2xl border border-yellow-100/50 hover:bg-yellow-50/60 transition-colors">
                            <div className="flex justify-between items-baseline mb-3">
                                <h3 className="text-xl font-bold text-gray-900">{act.org}</h3>
                                <span className="text-sm text-gray-500 font-mono">{act.time}</span>
                            </div>
                            <div className="text-base font-bold text-gray-700 mb-4 flex items-center gap-2">
                                <span className="bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded">{act.role}</span>
                                <span className="text-gray-400">|</span>
                                <span className="text-gray-500 text-sm">{act.loc}</span>
                            </div>
                            {act.details && (
                                <ul className="list-disc list-inside text-sm text-gray-600 space-y-2 opacity-90">
                                    {act.details.map((d, j) => <li key={j}>{d}</li>)}
                                </ul>
                            )}
                        </div>
                    ))}
                </div>
            </div>
          )}

           {/* ---> Slide 6: Skills (Separate) <--- */}
           {slide === 6 && (
            <div className="w-full h-full bg-white p-12 md:p-20 overflow-hidden flex flex-col justify-center">
                 <div className="mb-10">
                    <h2 className="text-3xl font-black text-slate-800 mb-4 border-b-4 border-purple-500 inline-block pb-2">ÊäÄËÉΩ</h2>
                 </div>
                 <div className="bg-slate-50 p-10 rounded-3xl border border-gray-100 shadow-sm leading-loose text-base text-gray-700 whitespace-pre-line relative overflow-hidden">
                     <div className="absolute top-0 right-0 w-32 h-32 bg-purple-100 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 opacity-50"></div>
                     <div className="relative z-10">
                        {CONFIG.resume.skills}
                     </div>
                 </div>
            </div>
          )}

          {/* ---> Slide 7: Works <--- */}
          {slide === 7 && (
            <div className="w-full h-full bg-[#f0f2f5] relative overflow-hidden">
               
               {/* ÂàóË°®Ê®°Âºè - Ê®™ÂêëÂ§ßÂõæÂç°Áâá */}
               <div className={`absolute inset-0 flex flex-col transition-all duration-300 ${selectedWork ? 'translate-x-[-20%] opacity-0 pointer-events-none' : 'translate-x-0 opacity-100'}`}>
                   <div className="p-3 border-b bg-white shadow-sm z-10 flex justify-between items-center shrink-0">
                       <div className="flex items-center gap-4">
                            <h2 className="font-bold text-gray-800 text-lg flex items-center gap-2"><Box className="text-blue-600"/> ‰ΩúÂìÅÈõÜ</h2>
                            <div className="flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full">
                                <div className="w-20 h-1.5 bg-gray-300 rounded-full overflow-hidden">
                                    <div className="h-full bg-blue-500 transition-all duration-500" style={{width: `${(capturedIds.length / CONFIG.gallery.length) * 100}%`}}></div>
                                </div>
                                <span className="text-[10px] font-bold text-gray-500">{capturedIds.length}/{CONFIG.gallery.length}</span>
                            </div>
                       </div>
                       <div className="text-[10px] font-bold text-gray-400">ÁÇπÂáªÊü•ÁúãËØ¶ÊÉÖ</div>
                   </div>

                   {/* Á¥ßÂáëÂûãÁΩëÊ†ºÂ∏ÉÂ±Ä - Á°Æ‰øù‰∏ÄÂ±èÂ±ïÁ§∫ */}
                   <div className="flex-1 overflow-y-auto p-4 md:p-6 grid grid-cols-2 md:grid-cols-4 gap-4 content-start pb-20">
                       {CONFIG.gallery.map(item => {
                           const isCaptured = capturedIds.includes(item.id);
                           const isEvolution = item.type === 'evolution';
                           return (
                               <div 
                                   key={item.id} 
                                   onClick={() => handleCapture(item)} 
                                   className={`
                                       group relative bg-white rounded-lg border-2 transition-all cursor-pointer overflow-hidden flex flex-col h-28 md:h-32 shadow-sm hover:shadow-md hover:-translate-y-0.5
                                       ${isCaptured 
                                            ? (isEvolution ? 'border-yellow-400' : 'border-blue-500') 
                                            : 'border-gray-200 hover:border-blue-300'
                                       }
                                   `}
                               >
                                   <div className="flex h-full">
                                       {/* Â∑¶‰æßÂõæ - Âç†ÊØîÁ®çÂ§ß */}
                                       <div className="w-[55%] h-full bg-gray-50 relative overflow-hidden border-r border-gray-100 flex items-center justify-center p-1">
                                            <img 
                                                    src={fixUrl(item.thumbnail)} 
                                                    className={`w-full h-full object-contain transition-all duration-500 ${isCaptured ? 'grayscale-0 scale-100' : 'grayscale-[0.3] scale-95 opacity-80'}`}
                                            />
                                       </div>
                                       {/* Âè≥‰æßÊñáÂ≠ó - Âç†ÊØîÁ®çÂ∞èÔºåÁ¥ßÂáë */}
                                       <div className="w-[45%] p-2 flex flex-col justify-center relative bg-white">
                                            <h3 className="font-bold text-xs text-gray-800 mb-1 leading-tight group-hover:text-blue-600 line-clamp-2">{item.title}</h3>
                                            {isCaptured && (
                                                <div className="mt-1">
                                                    {isEvolution 
                                                            ? <Star className="fill-yellow-400 text-yellow-500" size={14}/>
                                                            : <CheckCircle className="fill-blue-500 text-white" size={14}/>
                                                    }
                                                </div>
                                            )}
                                       </div>
                                   </div>
                               </div>
                           )
                       })}
                   </div>
               </div>

               {/* ËØ¶ÊÉÖÊ®°Âºè */}
               <div className={`absolute inset-0 bg-white flex flex-col transition-transform duration-300 z-20 ${selectedWork ? 'translate-y-0' : 'translate-y-full'}`}>
                   {selectedWork && (
                       <div className="flex flex-col h-full overflow-hidden">
                           <div className="bg-white border-b shadow-sm z-10 shrink-0 p-3 md:p-4">
                               <div className="flex items-center justify-between mb-1">
                                   <button onClick={() => setSelectedWork(null)} className="flex items-center gap-1 text-sm font-bold text-gray-600 hover:text-black transition-colors px-3 py-1.5 rounded-full bg-gray-100 hover:bg-gray-200">
                                       <ArrowLeft size={18}/> ËøîÂõû
                                   </button>
                                   <h2 className="text-xl font-black text-gray-800">{selectedWork.title}</h2>
                                   <div className="w-16"></div>
                               </div>
                               {selectedWork.desc && (
                                    <div className="text-sm text-gray-600 leading-relaxed text-center max-w-5xl mx-auto px-4 whitespace-pre-wrap">
                                        {selectedWork.desc}
                                    </div>
                               )}
                           </div>
                           
                           <div className="flex-1 overflow-hidden bg-gray-50 p-2 md:p-4 relative">
                                <div className="w-full h-full bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden relative p-2">
                                    {renderDetailContent(selectedWork)}
                                </div>
                                <div className="absolute bottom-6 right-6 pointer-events-none bg-black/50 text-white text-xs px-2 py-1 rounded backdrop-blur-sm z-20">
                                    ÁÇπÂáªÂõæÁâáÂèØÊîæÂ§ß
                                </div>
                           </div>
                       </div>
                   )}
               </div>

            </div>
          )}

          {/* ---> Slide 8: Contact <--- */}
          {slide === 8 && (
              <div className="w-full h-full bg-slate-900 text-white flex flex-col items-center justify-center p-8 relative overflow-hidden">
                  <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-900/40 via-slate-900 to-slate-900"></div>
                  
                  <div className="relative z-10 text-center space-y-8 animate-in fade-in zoom-in duration-700">
                      <h1 className="text-6xl font-black tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400">THANK YOU</h1>
                      
                      <div className="bg-white/10 backdrop-blur-md p-10 rounded-2xl border border-white/10 space-y-8 max-w-lg mx-auto shadow-2xl">
                          <div className="flex items-center gap-6 text-xl group cursor-default">
                              <div className="w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center shrink-0 shadow-lg group-hover:scale-110 transition-transform">
                                  <Phone size={24} className="fill-white"/>
                              </div>
                              <span className="font-mono font-bold tracking-wider">186-0350-0000</span>
                              <span className="text-xs bg-white/20 px-2 py-1 rounded border border-white/10">ÂæÆ‰ø°ÂêåÂè∑</span>
                          </div>
                          
                          <div className="flex items-center gap-6 text-xl group cursor-default">
                              <div className="w-12 h-12 rounded-full bg-purple-500 flex items-center justify-center shrink-0 shadow-lg group-hover:scale-110 transition-transform">
                                  <Mail size={24}/>
                              </div>
                              <div className="flex flex-col text-left text-base font-mono space-y-1">
                                  <span>1918524467@qq.com</span>
                                  <span>hopeaupl@gmail.com</span>
                              </div>
                          </div>
                      </div>
                      
                      <p className="text-gray-400 text-sm tracking-widest uppercase opacity-60">ÊúüÂæÖ‰∏éÊÇ®ÂÖ±ÂàõÊú™Êù•</p>
                  </div>
              </div>
          )}

        </div>

        {/* Â∫ïÈÉ®Ë£ÖÈ•∞Êù° (Â∏¶È´ò‰∫ÆÊèêÁ§∫) */}
        <div className="h-14 bg-gray-800 flex items-center justify-center border-t border-gray-600 relative z-30 shadow-lg">
             <div className="flex gap-10 items-center">
                 <button onClick={prevSlide} className="w-12 h-12 flex items-center justify-center rounded-full hover:bg-white/10 active:scale-95 transition-all text-gray-400 hover:text-white">
                     <ChevronLeft size={32}/>
                 </button>
                 <div className="w-24 h-1.5 bg-gray-700 rounded-full"></div>
                 <button 
                    onClick={nextSlide} 
                    className={`w-12 h-12 flex items-center justify-center rounded-full hover:bg-white/10 active:scale-95 transition-all text-gray-400 hover:text-white ${((isIdle && !selectedWork) || (slide === 7 && allCaptured)) ? 'bg-yellow-400 text-black animate-pulse shadow-[0_0_15px_red] ring-2 ring-red-500' : ''}`}
                 >
                     <ChevronRight size={32}/>
                 </button>
             </div>
        </div>

      </div>

      {/* ÁÅØÁÆ± (ÂÖ®Â±èÊîæÂ§ß) */}
      <Lightbox src={zoomSrc} onClose={() => setZoomSrc(null)} />
      
    </div>
  );
}
